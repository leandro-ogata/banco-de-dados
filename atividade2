Uma determinada Clínica Médica, emprega Médicos de diversas Especialidade, podendo o Médico ter mais de uma Especialidade, e com isso necessita ter os dados deles, Nome, Telefones e Data de Admissão, vale salientar que todos os Médicos possuem o CRM 
único para cada médico.
Tais médicos atendem pacientes em data e hora marcada para cada consulta. Os pacientes temos os dados de Código, Nome, Endereço, Telefone de Contato, além de terem cadastrados os Tipos Sanguíneos e RH.
Com base no caso acima elaborar um DataWareHouse para a tomada de decisão quanto a quantidade de consultas tanto por médicos e suas respectivas especialidades e as consultas para os seus pacientes.
Também de manter os dados das quantidades de pacientes com seus tipos de sangue para o acompanhamento do banco de sangue.
Elaborar os Modelos Conceitual, Lógico e Físico.
Pesquisas para a tomada de decisão quanto a atendimentos de médicos e pacientes e os tipos de sangue.
Criar as Triggers para manter os dados atualizados.

CREATE DATABASE CLINICA_MEDICA
USE CLINICA_MEDICA

CREATE TABLE TIPO_SANGUINEO
(CD_TIPO INT IDENTITY(1,1) NOT NULL,
DS_TIPO VARCHAR(2) NOT NULL,
DS_FATOR VARCHAR(1) NOT NULL,
CONSTRAINT PK_TIPO_SANGUINEO PRIMARY KEY(CD_TIPO),
CONSTRAINT CHEQUE_TIPO CHECK (DS_TIPO IN ('A','B','AB','O')),
CONSTRAINT CHEQUE_FATOR CHECK (DS_FATOR IN ('+','-')))

CREATE TABLE MEDICO
(CD_MEDICO INT IDENTITY(1,1) NOT NULL,
NM_MEDICO VARCHAR(50) NOT NULL,
DT_ADMISSAO DATE NULL,
NR_CRM INT NOT NULL,
CONSTRAINT PK_MEDICO PRIMARY KEY(CD_MEDICO),
CONSTRAINT UNICO_CRM UNIQUE(NR_CRM))

CREATE TABLE TELEFONE
(CD_TELEFONE INT IDENTITY(1,1) NOT NULL,
NR_DDD INT NULL,
NR_TELEFONE INT NULL,
CD_MEDICO INT NOT NULL,
CONSTRAINT PK_TELEFONE PRIMARY KEY(CD_TELEFONE),
CONSTRAINT FK_TELEFONE FOREIGN KEY(CD_MEDICO) REFERENCES MEDICO(CD_MEDICO))

CREATE TABLE ESPECIALIDADE
(CD_ESPECIALIDADE INT IDENTITY(1,1) NOT NULL,
NM_ESPECIALIDADE VARCHAR(50) NOT NULL,
CONSTRAINT PK_ESPECIALIDADE PRIMARY KEY(CD_ESPECIALIDADE))

CREATE TABLE MEDICO_ESPECIALIDADE
(CD_MEDICO INT NOT NULL,
CD_ESPECIALIDADE INT NOT NULL,
CONSTRAINT FK_MEDICO_ESPECIALIDADE FOREIGN KEY(CD_MEDICO) REFERENCES MEDICO(CD_MEDICO),
CONSTRAINT FK_ESPECIALIDADE_MEDICO FOREIGN KEY(CD_ESPECIALIDADE) REFERENCES ESPECIALIDADE(CD_ESPECIALIDADE))

CREATE TABLE PACIENTE
(CD_PACIENTE INT IDENTITY(1,1) NOT NULL,
NM_PACIENTE VARCHAR(50) NOT NULL,
NR_DDD INT NULL,
NR_TELEFONE INT NULL,
DS_ENDERECO VARCHAR(50) NULL,
CD_TIPO INT NOT NULL,
CONSTRAINT PK_PACIENTE PRIMARY KEY(CD_PACIENTE),
CONSTRAINT FK_PACIENTE FOREIGN KEY(CD_TIPO) REFERENCES TIPO_SANGUINEO(CD_TIPO))

CREATE TABLE MEDICO_PACIENTE
(DS_DATA DATE NOT NULL,
DS_HORA TIME NOT NULL,
CD_MEDICO INT NOT NULL,
CD_PACIENTE INT NOT NULL,
CONSTRAINT FK_MEDICO_PACIENTE FOREIGN KEY(CD_MEDICO) REFERENCES MEDICO(CD_MEDICO),
CONSTRAINT FK_PACIENTE_MEDICO FOREIGN KEY(CD_PACIENTE) REFERENCES PACIENTE(CD_PACIENTE))

INSERT INTO TIPO_SANGUINEO VALUES ('A','+')
INSERT INTO TIPO_SANGUINEO VALUES ('A','-')
INSERT INTO TIPO_SANGUINEO VALUES ('B','+')
INSERT INTO TIPO_SANGUINEO VALUES ('B','-')
INSERT INTO TIPO_SANGUINEO VALUES ('AB','+')
INSERT INTO TIPO_SANGUINEO VALUES ('AB','-')
INSERT INTO TIPO_SANGUINEO VALUES ('O','+')
INSERT INTO TIPO_SANGUINEO VALUES ('O','-')


